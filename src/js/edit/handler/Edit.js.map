{"version":3,"sources":["../../../es6/edit/handler/Edit.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAhBA;;;;;;;;;;IA2BM,Q;;;;;;;;;;+BAgBO,G,EAAY,O,EAAuB;AAC5C,mIAAiB,GAAjB;AACA,wBAAE,UAAF,CAAa,IAAb,EAAmB,OAAnB;;AAEA;AACA,WAAK,aAAL,GAAqB,QAAQ,YAA7B;;AAEA,UAAI,EAAE,KAAK,aAAL,YAA8B,kBAAE,YAAlC,CAAJ,EAAqD;AACnD,cAAM,IAAI,KAAJ,CAAU,+CAAV,CAAN;AACD;;AAED,WAAK,mBAAL,GAA2B,EAA3B;;AAEA;AACA,WAAK,IAAL,GAAY,SAAS,IAArB;AACD;;AAED;;;;6BACe;AACb,UAAI,KAAK,QAAL,IAAiB,CAAC,KAAK,mBAAL,EAAtB,EACE;AACF,WAAK,IAAL,CAAU,SAAV,EAAqB,EAAE,SAAS,KAAK,IAAhB,EAArB;AACA;AACA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,SAArB,EAAgC,EAAE,SAAS,KAAK,IAAhB,EAAhC;;AAEA;AACA;AACA,WAAK,aAAL,CACG,EADH,CACM,UADN,EACkB,KAAK,gBADvB,EACyC,IADzC,EAEG,EAFH,CAEM,aAFN,EAEqB,KAAK,iBAF1B,EAE6C,IAF7C;AAGD;;AAED;;;;8BACgB;AACd,UAAI,CAAC,KAAK,QAAV,EACE;;AAEF,WAAK,aAAL,CACG,GADH,CACO,UADP,EACmB,KAAK,gBADxB,EAC0C,IAD1C,EAEG,GAFH,CAEO,aAFP,EAEsB,KAAK,iBAF3B,EAE8C,IAF9C;AAGA;AACA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,QAArB,EAA+B,EAAE,SAAS,KAAK,IAAhB,EAA/B;AACA,WAAK,IAAL,CAAU,UAAV,EAAsB,EAAE,SAAS,KAAK,IAAhB,EAAtB;AACD;;AAED;;;;+BACiB;AACf,UAAI,KAAK,IAAT,EAAe;AACb,aAAK,IAAL,CAAU,YAAV,GAAyB,KAAzB;;AAEA,aAAK,aAAL,CAAmB,SAAnB,CAA6B,KAAK,gBAAlC,EAAoD,IAApD;;AAEA,aAAK,QAAL,GAAgB,sBAAY,KAAK,IAAjB,CAAhB;AACA,aAAK,QAAL,CAAc,aAAd,CAA4B;AAC1B,gBAAM,eAAU,IAAV,CAAe,QAAf,CAAwB,IAAxB,CAA6B,OAA7B,CAAqC,IADjB;AAE1B,mBAAS,eAAU,IAAV,CAAe,QAAf,CAAwB,IAAxB,CAA6B,OAA7B,CAAqC;AAFpB,SAA5B;;AAKA;AACA,aAAK,IAAL,CAAU,YAAV,GAAyB,KAAK,QAA9B;;AAEA,aAAK,cAAL;;AAEA,aAAK,IAAL,CACG,EADH,CACM,WADN,EACmB,KAAK,YADxB,EACsC,IADtC,EAEG,EAFH,CAEM,WAFN,EAEmB,KAAK,YAFxB,EAEsC,IAFtC,EAGG,EAHH,CAGM,eAHN,EAGuB,KAAK,YAH5B,EAG0C,IAH1C,EAIG,EAJH,CAIM,gBAAM,UAJZ,EAIwB,KAAK,cAJ7B,EAI6C,IAJ7C;AAKD;AACF;;AAED;;;;kCACoB;AAClB,UAAI,KAAK,IAAT,EAAe;AACb;AACA,aAAK,aAAL,CAAmB,SAAnB,CAA6B,KAAK,iBAAlC,EAAqD,IAArD;;AAEA;AACA,aAAK,mBAAL,GAA2B,EAA3B;;AAEA,aAAK,QAAL,CAAc,OAAd;AACA,aAAK,QAAL,GAAgB,IAAhB;;AAEA,aAAK,IAAL,CACG,GADH,CACO,WADP,EACoB,KAAK,YADzB,EACuC,IADvC,EAEG,GAFH,CAEO,WAFP,EAEoB,KAAK,YAFzB,EAEuC,IAFvC,EAGG,GAHH,CAGO,eAHP,EAGwB,KAAK,YAH7B,EAG2C,IAH3C,EAIG,GAJH,CAIO,gBAAM,UAJb,EAIyB,KAAK,cAJ9B,EAI8C,IAJ9C;AAKD;AACF;;AAED;;;;mCACqB;AACnB,WAAK,aAAL,CAAmB,SAAnB,CAA6B,SAAS,WAAT,CAAqB,KAArB,EAA4B;AACvD,aAAK,YAAL,CAAkB,KAAlB;AACD,OAFD,EAEG,IAFH;AAGD;;;2BAEY;AACX,UAAM,eAAe,IAAI,kBAAE,UAAN,EAArB;AACA,WAAK,aAAL,CAAmB,SAAnB,CAA6B,UAAC,KAAD,EAAW;AACtC,YAAI,MAAM,MAAV,EAAkB;AAChB,uBAAa,QAAb,CAAsB,KAAtB;AACA;AACA,gBAAM,MAAN,GAAe,KAAf,CAHgB,CAGM;AACvB;AACF,OAND;AAOA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,MAArB,EAA6B,EAAE,QAAQ,YAAV,EAA7B;AACD;;;iCAEY,K,EAAsB;AACjC,UAAM,KAAK,kBAAE,IAAF,CAAO,KAAP,CAAa,KAAb,CAAX;;AAEA,UAAI,CAAC,KAAK,mBAAL,CAAyB,EAAzB,CAAL,EAAmC;AACjC;AACA,YAAI,iBAAiB,kBAAE,QAAnB,IACC,iBAAiB,kBAAE,OADpB,IAEC,iBAAiB,kBAAE,SAFxB,EAEmC;AACjC,eAAK,mBAAL,CAAyB,EAAzB,IAA+B;AAC7B,qBAAS,kBAAW,YAAX,CAAwB,MAAM,UAAN,EAAxB;AADoB,WAA/B;AAGD,SAND,MAMO,IAAI,iBAAiB,kBAAE,MAAvB,EAA+B;AACpC,eAAK,mBAAL,CAAyB,EAAzB,IAA+B;AAC7B,oBAAQ,kBAAW,WAAX,CAAuB,MAAM,SAAN,EAAvB,CADqB;AAE7B,oBAAQ,MAAM,SAAN;AAFqB,WAA/B;AAID,SALM,MAKA,IAAI,iBAAiB,kBAAE,MAAvB,EAA+B;AAAE;AACtC,eAAK,mBAAL,CAAyB,EAAzB,IAA+B;AAC7B,oBAAQ,kBAAW,WAAX,CAAuB,MAAM,SAAN,EAAvB;AADqB,WAA/B;AAGD;AACF;AACF;;;qCAEsB;AACrB,WAAK,QAAL,CAAc,aAAd,CAA4B,SAAS,eAAT,EAA5B;AACD;;;iCAEY,K,EAAsB;AACjC,UAAM,KAAK,kBAAE,IAAF,CAAO,KAAP,CAAa,KAAb,CAAX;AACA;AACA,YAAM,MAAN,GAAe,KAAf,CAHiC,CAGX;AACtB,UAAI,MAAM,KAAK,mBAAf,EAAoC;AAClC;AACA,YAAI,iBAAiB,kBAAE,QAAnB,IACC,iBAAiB,kBAAE,OADpB,IAEC,iBAAiB,kBAAE,SAFxB,EAEmC;AACjC,gBAAM,UAAN,CAAiB,KAAK,mBAAL,CAAyB,EAAzB,EAA6B,OAA9C;AACD,SAJD,MAIO,IAAI,iBAAiB,kBAAE,MAAvB,EAA+B;AACpC,gBAAM,SAAN,CAAgB,KAAK,mBAAL,CAAyB,EAAzB,EAA6B,MAA7C;AACA,gBAAM,SAAN,CAAgB,KAAK,mBAAL,CAAyB,EAAzB,EAA6B,MAA7C;AACD,SAHM,MAGA,IAAI,iBAAiB,kBAAE,MAAvB,EAA+B;AAAE;AACtC,gBAAM,SAAN,CAAgB,KAAK,mBAAL,CAAyB,EAAzB,EAA6B,MAA7C;AACD;;AAED,cAAM,IAAN,CAAW,eAAX,EAA4B,EAAC,YAAD,EAA5B;AACD;AACF;;;qCAEgB,K,EAA4D;AAC3E,UAAM,QAAQ,MAAM,KAAN,IAAe,MAAM,MAArB,IAA+B,KAA7C;;AAEA;AACA,WAAK,YAAL,CAAkB,KAAlB;;AAEA,UAAI,KAAK,OAAL,CAAa,IAAjB,EAAuB;AACrB;AACA,cAAM,OAAN,CAAc,IAAd,GAAqB,kBAAE,IAAF,CAAO,MAAP,CAAc,EAAd,EAAkB,KAAK,OAAL,CAAa,IAA/B,CAArB;AACD;;AAED;AACA,UAAI,KAAK,OAAL,CAAa,mBAAjB,EAAsC;AACpC,YAAM,cAAc,kBAAE,IAAF,CAAO,MAAP,CAAc,EAAd,EAAkB,KAAK,OAAL,CAAa,mBAA/B,CAApB;;AAEA;AACA,YAAI,YAAY,aAAhB,EAA+B;AAC7B;AACA,sBAAY,KAAZ,GAAoB,MAAM,OAAN,CAAc,KAAlC;AACA;AACA,sBAAY,SAAZ,GAAwB,MAAM,OAAN,CAAc,SAAtC;AACD;;AAED;AACA,cAAM,OAAN,CAAc,QAAd,GAAyB,kBAAE,MAAF,CAAS,EAAT,EAAa,MAAM,OAAnB,CAAzB;AACA;AACA,cAAM,OAAN,CAAc,OAAd,GAAwB,WAAxB;AACD;;AAED,UAAI,iBAAiB,kBAAE,MAAvB,EAA+B;AAC7B,YAAI,MAAM,OAAV,EACE,MAAM,OAAN,CAAc,MAAd;AACF,cAAM,QAAN,CAAe,MAAf;AACA,cACG,EADH,CACM,SADN,EACiB,KAAK,gBADtB;AAEE;AAFF,SAGG,EAHH,CAGM,WAHN,EAGmB,KAAK,YAHxB,EAGsC,IAHtC,EAIG,EAJH,CAIM,eAJN,EAIuB,KAAK,YAJ5B,EAI0C,IAJ1C,EAKG,EALH,CAKM,UALN,EAKkB,KAAK,gBALvB,EAKyC,IALzC,EAMG,EANH,CAMM,aANN,EAMqB,KAAK,gBAN1B,EAM4C,IAN5C;AAOD,OAXD,MAWO;AACL,cAAM,OAAN,CAAc,MAAd;AACH;;;sCAEiB,K,EAA4D;AAC5E,UAAM,QAAQ,MAAM,KAAN,IAAe,MAAM,MAArB,IAA+B,KAA7C;;AAEA;AACA,YAAM,MAAN,GAAe,KAAf;AACA,UAAI,MAAM,OAAV,EAAmB;AACjB,cAAM,OAAN,CAAc,OAAd;;AAEF;AACA,aAAO,MAAM,OAAN,CAAc,OAArB;AACA;AACA,aAAO,MAAM,OAAN,CAAc,QAArB;AACA;AACA,UAAI,KAAK,oBAAT,EAA+B;AAC7B,YAAI,iBAAiB,kBAAE,MAAvB,EAA+B;AAC7B,eAAK,sBAAL,CAA4B,KAA5B;AACD,SAFD,MAEO;AACL;AACA;AACA,gBAAM,QAAN,CAAe,MAAM,OAAN,CAAc,eAA7B;AACA;AACA;AACA,iBAAO,MAAM,OAAN,CAAc,eAArB;AACD;AACF;;AAED,UAAI,iBAAiB,kBAAE,MAAvB,EAA+B;AAC7B,cAAM,QAAN,CAAe,OAAf;AACA,cACG,GADH,CACO,SADP,EACkB,KAAK,gBADvB,EACyC,IADzC,EAEG,GAFH,CAEO,WAFP,EAEoB,KAAK,YAFzB,EAEuC,IAFvC,EAGG,GAHH,CAGO,eAHP,EAGwB,KAAK,YAH7B,EAG2C,IAH3C,EAIG,GAJH,CAIO,UAJP,EAImB,KAAK,gBAJxB,EAI0C,IAJ1C,EAKG,GALH,CAKO,aALP,EAKsB,KAAK,gBAL3B,EAK6C,IAL7C;AAMD,OARD,MAQO;AACL,cAAM,OAAN,CAAc,OAAd;AACH;;;iCAEY,K,EAAiC;AAC5C,WAAK,QAAL,CAAc,cAAd,CAA6B,MAAM,MAAnC;AACD;;;qCAEgB,K,EAAgC;AAC/C,UAAM,QAAQ,MAAM,MAApB;AACA,YAAM,MAAN,GAAe,IAAf;AACA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,QAArB,EAA+B,EAAC,YAAD,EAA/B;AACD;;;iCAEY,K,EAA0D;AACrE,UAAM,aAAa,MAAM,aAAN,CAAoB,cAApB,CAAmC,CAAnC,CAAnB;AACA,UAAM,aAAa,KAAK,IAAL,CAAU,sBAAV,CAAiC,UAAjC,CAAnB;AACA,UAAM,SAAS,KAAK,IAAL,CAAU,kBAAV,CAA6B,UAA7B,CAAf;AACA,YAAM,MAAN,CAAa,SAAb,CAAuB,MAAvB;AACD;;;0CAE8B;AAC7B,aAAO,KAAK,aAAL,CAAmB,SAAnB,GAA+B,MAA/B,KAA0C,CAAjD;AACD;;;sCA3QyD;AACxD,aAAQ;AACN,cAAM,eAAU,IAAV,CAAe,QAAf,CAAwB,IAAxB,CAA6B,OAA7B,CAAqC,IADrC;AAEN,iBAAS,eAAU,IAAV,CAAe,QAAf,CAAwB,IAAxB,CAA6B,OAA7B,CAAqC;AAFxC,OAAR;AAID;;;EAdoB,kBAAE,O;;AAAnB,Q,CAOG,I;;;AAgRT,IAAM,OAAO,SAAS,MAAT,CAAgB,EAAC,UAAU,kBAAE,OAAF,CAAU,SAArB,EAAhB,CAAb;kBACe,I","file":"Edit.js","sourcesContent":["/** @flow\n * StratoDem Analytics : Edit\n * Principal Author(s) : Michael Clawar\n * Secondary Author(s) :\n * Description :\n *\n *  (c) 2016- StratoDem Analytics, LLC\n *  All Rights Reserved\n */\n\nimport L from 'leaflet';\n\nimport drawLocal from '../../draw';\nimport Event from '../../Event';\nimport Tooltip from '../../Tooltip';\nimport { LatLngUtil } from '../../ext/index';\nimport { TYPE_EDIT } from './constants';\n\n\ntype T_ORIGINAL_EVENT = {\n  clientX: number,\n  clientY: number,\n  latlng: L.LatLng,\n  changedTouches: Array<{clientX: number, clientY: number}>,\n};\n\n\nclass BaseEdit extends L.Handler {\n  _enabled: boolean;\n  _featureGroup: L.FeatureGroup;\n  _map: L.Map;\n  _uneditedLayerProps: Object;\n  type: string;\n\n  static TYPE = TYPE_EDIT;\n\n  static _getTooltipText(): {text: string, subtext: string} {\n    return ({\n      text: drawLocal.edit.handlers.edit.tooltip.text,\n      subtext: drawLocal.edit.handlers.edit.tooltip.subtext,\n    });\n  }\n\n  initialize(map: L.Map, options: Object): void {\n    super.initialize(map);\n    L.setOptions(this, options);\n\n    // Store the selectable layer group for ease of access\n    this._featureGroup = options.featureGroup;\n\n    if (!(this._featureGroup instanceof L.FeatureGroup)) {\n      throw new Error('options.featureGroup must be a L.FeatureGroup');\n    }\n\n    this._uneditedLayerProps = {};\n\n    // Save the type so super can fire, need to do this as cannot do this.TYPE :(\n    this.type = BaseEdit.TYPE;\n  }\n\n  /** Enable the edit toolbar **/\n  enable(): void {\n    if (this._enabled || !this._hasAvailableLayers())\n      return;\n    this.fire('enabled', { handler: this.type });\n    // this disable other handlers\n    this._map.fire(Event.EDITSTART, { handler: this.type });\n\n    // allow drawLayer to be updated before beginning edition.\n    super.enable();\n    this._featureGroup\n      .on('layeradd', this._enableLayerEdit, this)\n      .on('layerremove', this._disableLayerEdit, this);\n  }\n\n  /** Disable the edit toolbar **/\n  disable(): void {\n    if (!this._enabled)\n      return;\n\n    this._featureGroup\n      .off('layeradd', this._enableLayerEdit, this)\n      .off('layerremove', this._disableLayerEdit, this);\n    super.disable();\n    this._map.fire(Event.EDITSTOP, { handler: this.type });\n    this.fire('disabled', { handler: this.type });\n  }\n\n  /** Add listener hooks for this handler **/\n  addHooks(): void {\n    if (this._map) {\n      this._map.getContainer().focus();\n\n      this._featureGroup.eachLayer(this._enableLayerEdit, this);\n\n      this._tooltip = new Tooltip(this._map);\n      this._tooltip.updateContent({\n        text: drawLocal.edit.handlers.edit.tooltip.text,\n        subtext: drawLocal.edit.handlers.edit.tooltip.subtext,\n      });\n\n      // Quickly access the tooltip to update for intersection checking\n      this._map._editTooltip = this._tooltip;\n\n      this._updateTooltip();\n\n      this._map\n        .on('mousemove', this._onMouseMove, this)\n        .on('touchmove', this._onMouseMove, this)\n        .on('MSPointerMove', this._onMouseMove, this)\n        .on(Event.EDITVERTEX, this._updateTooltip, this);\n    }\n  }\n\n  /** Remove listener hooks for this handler **/\n  removeHooks(): void {\n    if (this._map) {\n      // Clean up selected layers.\n      this._featureGroup.eachLayer(this._disableLayerEdit, this);\n\n      // Clear the backups of the original layers\n      this._uneditedLayerProps = {};\n\n      this._tooltip.dispose();\n      this._tooltip = null;\n\n      this._map\n        .off('mousemove', this._onMouseMove, this)\n        .off('touchmove', this._onMouseMove, this)\n        .off('MSPointerMove', this._onMouseMove, this)\n        .off(Event.EDITVERTEX, this._updateTooltip, this);\n    }\n  }\n\n  /** Revert each layer's geometry changes **/\n  revertLayers(): void {\n    this._featureGroup.eachLayer(function revertLayer(layer) {\n      this._revertLayer(layer);\n    }, this);\n  }\n\n  save(): void {\n    const editedLayers = new L.LayerGroup();\n    this._featureGroup.eachLayer((layer) => {\n      if (layer.edited) {\n        editedLayers.addLayer(layer);\n        // eslint-disable-next-line\n        layer.edited = false; // TODO no reassignment\n      }\n    });\n    this._map.fire(Event.EDITED, { layers: editedLayers });\n  }\n\n  _backupLayer(layer: L.Layer): void {\n    const id = L.Util.stamp(layer);\n\n    if (!this._uneditedLayerProps[id]) {\n      // Polyline, Polygon or Rectangle\n      if (layer instanceof L.Polyline\n        || layer instanceof L.Polygon\n        || layer instanceof L.Rectangle) {\n        this._uneditedLayerProps[id] = {\n          latlngs: LatLngUtil.cloneLatLngs(layer.getLatLngs()),\n        };\n      } else if (layer instanceof L.Circle) {\n        this._uneditedLayerProps[id] = {\n          latlng: LatLngUtil.cloneLatLng(layer.getLatLng()),\n          radius: layer.getRadius(),\n        };\n      } else if (layer instanceof L.Marker) { // Marker\n        this._uneditedLayerProps[id] = {\n          latlng: LatLngUtil.cloneLatLng(layer.getLatLng()),\n        };\n      }\n    }\n  }\n\n  _updateTooltip(): void {\n    this._tooltip.updateContent(BaseEdit._getTooltipText());\n  }\n\n  _revertLayer(layer: L.Layer): void {\n    const id = L.Util.stamp(layer);\n    // eslint-disable-next-line\n    layer.edited = false; // TODO no reassignment\n    if (id in this._uneditedLayerProps) {\n      // Polyline, Polygon or Rectangle\n      if (layer instanceof L.Polyline\n        || layer instanceof L.Polygon\n        || layer instanceof L.Rectangle) {\n        layer.setLatLngs(this._uneditedLayerProps[id].latlngs);\n      } else if (layer instanceof L.Circle) {\n        layer.setLatLng(this._uneditedLayerProps[id].latlng);\n        layer.setRadius(this._uneditedLayerProps[id].radius);\n      } else if (layer instanceof L.Marker) { // Marker\n        layer.setLatLng(this._uneditedLayerProps[id].latlng);\n      }\n\n      layer.fire('revert-edited', {layer});\n    }\n  }\n\n  _enableLayerEdit(event: {layer?: L.Layer, target?: L.Layer} | L.Layer): void {\n    const layer = event.layer || event.target || event;\n\n    // Back up this layer (if haven't before)\n    this._backupLayer(layer);\n\n    if (this.options.poly) {\n      // $FlowFixMe\n      layer.options.poly = L.Util.extend({}, this.options.poly);\n    }\n\n    // Set different style for editing mode\n    if (this.options.selectedPathOptions) {\n      const pathOptions = L.Util.extend({}, this.options.selectedPathOptions);\n\n      // Use the existing color of the layer\n      if (pathOptions.maintainColor) {\n        // $FlowFixMe\n        pathOptions.color = layer.options.color;\n        // $FlowFixMe\n        pathOptions.fillColor = layer.options.fillColor;\n      }\n\n      // $FlowFixMe\n      layer.options.original = L.extend({}, layer.options);\n      // $FlowFixMe\n      layer.options.editing = pathOptions;\n    }\n\n    if (layer instanceof L.Marker) {\n      if (layer.editing)\n        layer.editing.enable();\n      layer.dragging.enable();\n      layer\n        .on('dragend', this._onMarkerDragEnd)\n        // #TODO: remove when leaflet finally fixes their draggable so it's touch friendly again.\n        .on('touchmove', this._onTouchMove, this)\n        .on('MSPointerMove', this._onTouchMove, this)\n        .on('touchend', this._onMarkerDragEnd, this)\n        .on('MSPointerUp', this._onMarkerDragEnd, this);\n    } else // $FlowFixMe\n      layer.editing.enable();\n  }\n\n  _disableLayerEdit(event: {layer?: L.Layer, target?: L.Layer} | L.Layer): void {\n    const layer = event.layer || event.target || event;\n\n    // $FlowFixMe\n    layer.edited = false;\n    if (layer.editing) // $FlowFixMe\n      layer.editing.disable();\n\n    // $FlowFixMe\n    delete layer.options.editing;\n    // $FlowFixMe\n    delete layer.options.original;\n    // Reset layer styles to that of before select\n    if (this._selectedPathOptions) {\n      if (layer instanceof L.Marker) {\n        this._toggleMarkerHighlight(layer);\n      } else {\n        // reset the layer style to what is was before being selected\n        // $FlowFixMe\n        layer.setStyle(layer.options.previousOptions);\n        // remove the cached options for the layer object\n        // $FlowFixMe\n        delete layer.options.previousOptions;\n      }\n    }\n\n    if (layer instanceof L.Marker) {\n      layer.dragging.disable();\n      layer\n        .off('dragend', this._onMarkerDragEnd, this)\n        .off('touchmove', this._onTouchMove, this)\n        .off('MSPointerMove', this._onTouchMove, this)\n        .off('touchend', this._onMarkerDragEnd, this)\n        .off('MSPointerUp', this._onMarkerDragEnd, this);\n    } else // $FlowFixMe\n      layer.editing.disable();\n  }\n\n  _onMouseMove(event: {latlng: L.LatLng}): void {\n    this._tooltip.updatePosition(event.latlng);\n  }\n\n  _onMarkerDragEnd(event: {target: L.Layer}): void {\n    const layer = event.target;\n    layer.edited = true;\n    this._map.fire(Event.EDITMOVE, {layer});\n  }\n\n  _onTouchMove(event: {originalEvent: T_ORIGINAL_EVENT, target: Object}) {\n    const touchEvent = event.originalEvent.changedTouches[0];\n    const layerPoint = this._map.mouseEventToLayerPoint(touchEvent);\n    const latlng = this._map.layerPointToLatLng(layerPoint);\n    event.target.setLatLng(latlng);\n  }\n\n  _hasAvailableLayers(): boolean {\n    return this._featureGroup.getLayers().length !== 0;\n  }\n}\n\nconst Edit = BaseEdit.extend({includes: L.Evented.prototype});\nexport default Edit;\n"]}