{"version":3,"sources":["../../../es6/edit/handler/Circle.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAUA;;;;AAEA;;;;AACA;;;;;;IAGqB,M;;;;;;;;;;wCACO;AACxB,UAAM,SAAS,KAAK,MAAL,CAAY,SAAZ,EAAf;;AAEA,WAAK,WAAL,GAAmB,KAAK,aAAL,CAAmB,MAAnB,EAA2B,KAAK,OAAL,CAAa,QAAxC,CAAnB;AACD;;;0CAE2B;AAC1B,UAAM,SAAS,KAAK,MAAL,CAAY,SAAZ,EAAf;AACA,UAAM,oBAAoB,KAAK,qBAAL,CAA2B,MAA3B,CAA1B;;AAEA,WAAK,cAAL,GAAsB,EAAtB;AACA,WAAK,cAAL,CAAoB,IAApB,CAAyB,KAAK,aAAL,CAAmB,iBAAnB,EAAsC,KAAK,OAAL,CAAa,UAAnD,CAAzB;AACD;;;0CAEqB,M,EAAiC;AACrD;AACA,UAAM,QAAQ,KAAK,MAAL,CAAY,OAAZ,GAAsB,KAAK,GAAL,CAAS,KAAK,EAAL,GAAU,CAAnB,CAApC;AACA,UAAM,QAAQ,KAAK,IAAL,CAAU,OAAV,CAAkB,MAAlB,CAAd;AACA,aAAO,KAAK,IAAL,CAAU,SAAV,CAAoB,CAAC,MAAM,CAAN,GAAU,KAAX,EAAkB,MAAM,CAAN,GAAU,KAA5B,CAApB,CAAP;AACD;;;0BAEK,M,EAAwB;AAC5B,UAAM,oBAAoB,KAAK,qBAAL,CAA2B,MAA3B,CAA1B;;AAEA;AACA,WAAK,cAAL,CAAoB,CAApB,EAAuB,SAAvB,CAAiC,iBAAjC;;AAEA;AACA,WAAK,MAAL,CAAY,SAAZ,CAAsB,MAAtB;;AAEA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,QAArB,EAA+B,EAAC,OAAO,KAAK,MAAb,EAA/B;AACD;;;4BAEO,M,EAAwB;AAC9B,UAAM,aAAa,KAAK,WAAL,CAAiB,SAAjB,EAAnB;AACA,UAAM,SAAS,WAAW,UAAX,CAAsB,MAAtB,CAAf;;AAEA,WAAK,MAAL,CAAY,SAAZ,CAAsB,MAAtB;;AAEA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,UAArB,EAAiC,EAAC,OAAO,KAAK,MAAb,EAAjC;AACD;;;0BAzDH;;;;;;;;;;kBAgBqB,M;;;AA4CrB,kBAAE,MAAF,CAAS,WAAT,CAAqB,SAAS,QAAT,GAAoB;AACvC,MAAI,MAAJ,EAAY;AACV,SAAK,OAAL,GAAe,IAAI,MAAJ,CAAW,IAAX,CAAf;;AAEA,QAAI,KAAK,OAAL,CAAa,QAAjB,EAA2B;AACzB,WAAK,OAAL,CAAa,MAAb;AACD;AACF;;AAED,OAAK,EAAL,CAAQ,KAAR,EAAe,SAAS,KAAT,GAAiB;AAC9B,QAAI,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,OAAb,EAApB,EAA4C;AAC1C,WAAK,OAAL,CAAa,QAAb;AACD;AACF,GAJD;;AAMA,OAAK,EAAL,CAAQ,QAAR,EAAkB,SAAS,QAAT,GAAoB;AACpC,QAAI,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,OAAb,EAApB,EAA4C;AAC1C,WAAK,OAAL,CAAa,WAAb;AACD;AACF,GAJD;AAKD,CApBD","file":"Circle.js","sourcesContent":["/** @flow\n * StratoDem Analytics : Circle\n * Principal Author(s) : Michael Clawar\n * Secondary Author(s) :\n * Description :\n *\n *  (c) 2016- StratoDem Analytics, LLC\n *  All Rights Reserved\n */\n\nimport L from 'leaflet';\n\nimport Event from '../../Event';\nimport SimpleShape from './SimpleShape';\n\n\nexport default class Circle extends SimpleShape {\n  _createMoveMarker(): void {\n    const center = this._shape.getLatLng();\n\n    this._moveMarker = this._createMarker(center, this.options.moveIcon);\n  }\n\n  _createResizeMarker(): void {\n    const center = this._shape.getLatLng();\n    const resizemarkerPoint = this._getResizeMarkerPoint(center);\n\n    this._resizeMarkers = [];\n    this._resizeMarkers.push(this._createMarker(resizemarkerPoint, this.options.resizeIcon));\n  }\n\n  _getResizeMarkerPoint(latlng: L.LatLng): Array<number> {\n    // From L.shape.getBounds()\n    const delta = this._shape._radius * Math.cos(Math.PI / 4);\n    const point = this._map.project(latlng);\n    return this._map.unproject([point.x + delta, point.y - delta]);\n  }\n\n  _move(latlng: L.LatLng): void {\n    const resizemarkerPoint = this._getResizeMarkerPoint(latlng);\n\n    // Move the resize marker\n    this._resizeMarkers[0].setLatLng(resizemarkerPoint);\n\n    // Move the circle\n    this._shape.setLatLng(latlng);\n\n    this._map.fire(Event.EDITMOVE, {layer: this._shape});\n  }\n\n  _resize(latlng: L.LatLng): void {\n    const moveLatLng = this._moveMarker.getLatLng();\n    const radius = moveLatLng.distanceTo(latlng);\n\n    this._shape.setRadius(radius);\n\n    this._map.fire(Event.EDITRESIZE, {layer: this._shape});\n  }\n}\n\nL.Circle.addInitHook(function initHook() {\n  if (Circle) {\n    this.editing = new Circle(this);\n\n    if (this.options.editable) {\n      this.editing.enable();\n    }\n  }\n\n  this.on('add', function onAdd() {\n    if (this.editing && this.editing.enabled()) {\n      this.editing.addHooks();\n    }\n  });\n\n  this.on('remove', function onRemove() {\n    if (this.editing && this.editing.enabled()) {\n      this.editing.removeHooks();\n    }\n  });\n});\n"]}