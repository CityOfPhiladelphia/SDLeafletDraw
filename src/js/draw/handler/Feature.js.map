{"version":3,"sources":["../../../es6/draw/handler/Feature.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;;;;AAEA;;;;AACA;;;;;;IAGM,W;;;;;;;;;;+BACO,G,EAAY,O,EAAuB;AAC5C,WAAK,IAAL,GAAY,GAAZ;AACA,WAAK,UAAL,GAAkB,IAAI,UAAtB;AACA,WAAK,YAAL,GAAoB,IAAI,MAAJ,CAAW,WAA/B;AACA,WAAK,UAAL,GAAkB,IAAI,MAAJ,CAAW,SAA7B;;AAEA,wBAAE,UAAF,CAAa,IAAb,EAAmB,OAAnB;AACD;;;6BAEc;AACb,UAAI,KAAK,QAAT,EACE;;AAEF;AACA,WAAK,IAAL,CAAU,SAAV,EAAqB,EAAE,SAAS,KAAK,IAAhB,EAArB;;AAEA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,SAArB,EAAgC,EAAE,WAAW,KAAK,IAAlB,EAAhC;AACD;;;8BAEe;AACd,UAAI,CAAC,KAAK,QAAV,EACE;;AAEF;;AAEA,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,QAArB,EAA+B,EAAE,WAAW,KAAK,IAAlB,EAA/B;;AAEA,WAAK,IAAL,CAAU,UAAV,EAAsB,EAAE,SAAS,KAAK,IAAhB,EAAtB;AACD;;AAED;;;;+BACiB;AACf,UAAI,KAAK,IAAT,EAAe;AACb,0BAAE,OAAF,CAAU,oBAAV;;AAEA,aAAK,IAAL,CAAU,YAAV,GAAyB,KAAzB;AACA,gBAAQ,GAAR,CAAY,kBAAZ;AACA,aAAK,QAAL,GAAgB,sBAAY,KAAK,IAAjB,CAAhB;;AAEA,0BAAE,QAAF,CAAW,EAAX,CAAc,KAAK,UAAnB,EAA+B,OAA/B,EAAwC,KAAK,cAA7C,EAA6D,IAA7D;AACD;AACF;;AAED;;;;kCACoB;AAClB,UAAI,KAAK,IAAT,EAAe;AACb,0BAAE,OAAF,CAAU,mBAAV;;AAEA,aAAK,QAAL,CAAc,OAAd;AACA,aAAK,QAAL,GAAgB,IAAhB;;AAEA,0BAAE,QAAF,CAAW,GAAX,CAAe,KAAK,UAApB,EAAgC,OAAhC,EAAyC,KAAK,cAA9C,EAA8D,IAA9D;AACD;AACF;;AAED;;;;+BACW,O,EAAuB;AAChC,wBAAE,UAAF,CAAa,IAAb,EAAmB,OAAnB;AACD;;;sCAEiB,K,EAAgB;AAChC,WAAK,IAAL,CAAU,IAAV,CAAe,gBAAM,OAArB,EAA8B,EAAE,YAAF,EAAS,WAAW,KAAK,IAAzB,EAA9B;AACD;;AAED;;;;mCACe,K,EAAgC;AAC7C,WAAK,IAAL,CAAU,IAAV,CAAe,eAAf,EAAgC,EAAE,WAAW,KAAK,IAAlB,EAAhC;AACA,UAAI,MAAM,OAAN,KAAkB,EAAtB,EAA0B;AACxB,aAAK,OAAL;AACD;AACF;;;EAvEuB,kBAAE,O,GAhB5B;;;;;;;;;;AA0FA,IAAM,UAAU,YAAY,MAAZ,CAAmB,EAAC,UAAU,kBAAE,OAAF,CAAU,SAArB,EAAnB,CAAhB;kBACe,O","file":"Feature.js","sourcesContent":["/** @flow\n * StratoDem Analytics : Draw.Feature\n * Principal Author(s) : Michael Clawar\n * Secondary Author(s) :\n * Description :\n *\n *  (c) 2016- StratoDem Analytics, LLC\n *  All Rights Reserved\n */\n\nimport L from 'leaflet';\n\nimport Event from '../../Event';\nimport Tooltip from '../../Tooltip';\n\n\nclass BaseFeature extends L.Handler {\n  initialize(map: L.Map, options: Object): void {\n    this._map = map;\n    this._container = map._container;\n    this._overlayPane = map._panes.overlayPane;\n    this._popupPane = map._panes.popupPane;\n\n    L.setOptions(this, options);\n  }\n\n  enable(): void {\n    if (this._enabled)\n      return;\n\n    super.enable();\n    this.fire('enabled', { handler: this.type });\n\n    this._map.fire(Event.DRAWSTART, { layerType: this.type });\n  }\n\n  disable(): void {\n    if (!this._enabled)\n      return;\n\n    super.disable();\n\n    this._map.fire(Event.DRAWSTOP, { layerType: this.type });\n\n    this.fire('disabled', { handler: this.type });\n  }\n\n  /** Adds event listeners to this handler **/\n  addHooks(): void {\n    if (this._map) {\n      L.DomUtil.disableTextSelection();\n\n      this._map.getContainer().focus();\n      console.log('creating tooltip');\n      this._tooltip = new Tooltip(this._map);\n\n      L.DomEvent.on(this._container, 'keyup', this._cancelDrawing, this);\n    }\n  }\n\n  /** Removes event listeners from this handler **/\n  removeHooks(): void {\n    if (this._map) {\n      L.DomUtil.enableTextSelection();\n\n      this._tooltip.dispose();\n      this._tooltip = null;\n\n      L.DomEvent.off(this._container, 'keyup', this._cancelDrawing, this);\n    }\n  }\n\n  /** Sets new options to this handler **/\n  setOptions(options: Object): void {\n    L.setOptions(this, options);\n  }\n\n  _fireCreatedEvent(layer: L.Layer) {\n    this._map.fire(Event.CREATED, { layer, layerType: this.type });\n  }\n\n  /** Cancel the drawing when the escape key is pressed **/\n  _cancelDrawing(event: {keyCode: number}): void {\n    this._map.fire('draw:canceled', { layerType: this.type });\n    if (event.keyCode === 27) {\n      this.disable();\n    }\n  }\n}\n\nconst Feature = BaseFeature.extend({includes: L.Evented.prototype});\nexport default Feature;\n"]}