{"version":3,"sources":["../es6/Tooltip.js"],"names":[],"mappings":"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","file":"Tooltip.js","sourcesContent":["/** @flow\n * StratoDem Analytics : Tooltip\n * Principal Author(s) : Michael Clawar\n * Secondary Author(s) :\n * Description :\n *\n *  (c) 2016- StratoDem Analytics, LLC\n *  All Rights Reserved\n */\n\nimport L from 'leaflet';\n\n\nexport default class Tooltip extends L.Class {\n  _map: L.Map;\n  _visible: boolean;\n  _singleLineLabel: boolean;\n\n  constructor(map: L.Map) {\n    // This uses constructor vs initialize because new Tooltip goes to constructor\n    super();\n    this._map = map;\n    this._popupPane = this._map._panes.popupPane;\n    this._visible = false;\n\n    this._container = this._map.options.drawControlTooltips\n      ? L.DomUtil.create('div', 'leaflet-draw-tooltip', this._popupPane)\n      : null;\n    this._singleLineLabel = false;\n\n    this._map.on('mouseout', this._onMouseOut, this);\n  }\n\n  /** Remove Tooltip DOM and unbind events **/\n  dispose(): void {\n    this._map.off('mouseout', this._onMouseOut, this);\n\n    if (this._container) {\n      this._popupPane.removeChild(this._container);\n      this._container = null;\n    }\n  }\n\n  /** **/\n  updateContent(labelText: {text: string, subtext?: string}): Object {\n    if (!this._container)\n      return this;\n\n    const localText = {\n      text: labelText.text,\n      subtext: typeof labelText.subtext === 'string' ? labelText.subtext : '',\n    };\n\n    // update the vertical position (only if changed)\n    if (localText.subtext.length === 0 && !this._singleLineLabel) {\n      L.DomUtil.addClass(this._container, 'leaflet-draw-tooltip-single');\n      this._singleLineLabel = true;\n    } else if (localText.subtext.length > 0 && this._singleLineLabel) {\n      L.DomUtil.removeClass(this._container, 'leaflet-draw-tooltip-single');\n      this._singleLineLabel = false;\n    }\n\n    const subtext = localText.subtext.length > 0\n      ? `<span class=\"leaflet-draw-tooltip-subtext\">${localText.subtext}</span><br />`\n      : '';\n    this._container.innerHTML = `${subtext}<span>${localText.text}</span>`;\n\n    if (!localText.text && !localText.subtext) {\n      this._visible = false;\n      this._container.style.visibility = 'hidden';\n    } else {\n      this._visible = true;\n      this._container.style.visibility = 'inherit';\n    }\n\n    return this;\n  }\n\n  /** Changes the location of the tooltip **/\n  updatePosition(latlng: L.LatLng): Object {\n    const pos = this._map.latLngToLayerPoint(latlng);\n    const tooltipContainer = this._container;\n\n    if (this._container) {\n      if (this._visible)\n        tooltipContainer.style.visibility = 'inherit';\n      L.DomUtil.setPosition(tooltipContainer, pos);\n    }\n\n    return this;\n  }\n\n  /** Apply error class to Tooltip **/\n  showAsError(): Object {\n    if (this._container)\n      L.DomUtil.addClass(this._container, 'leaflet-error-draw-tooltip');\n    return this;\n  }\n\n  /** Removes the error class from the tooltip **/\n  removeError(): Object {\n    if (this._container)\n      L.DomUtil.removeClass(this._container, 'leaflet-error-draw-tooltip');\n    return this;\n  }\n\n  _onMouseOut(): void {\n    if (this._container)\n      this._container.style.visibility = 'hidden';\n  }\n}\n"]}